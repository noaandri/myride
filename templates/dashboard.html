{% extends "base.html" %}

{% block content %}
    <h1>Dashboard</h1>

    <!-- Anzeigen Fortschritts des wöchentlichen Zieles in % -->
    <div>
        <strong>Wöchentliches Ziel:</strong> {{ progress_percentage }}%
    </div>

    <!-- Navigations-Links für verschiedene Aktionen -->
    <a href="{{ url_for('add_activity') }}">Neue Aktivität hinzufügen</a>
    <a href="{{ url_for('set_goal') }}">Wöchentliches Ziel setzen</a>
    <a href="{{ url_for('logout') }}">Logout</a>
    <h2>Aktivitäten</h2>

    <!-- Möglichkeit zum Sortieren der Aktivitätsliste -->
    <div>
        <p>Sortieren nach:</p>
        <a href="{{ url_for('dashboard', sort_by='date', sort_order='desc') }}">Datum absteigend (Default)</a>
        <a href="{{ url_for('dashboard', sort_by='type', sort_order='asc') }}">Typ</a>
        <a href="{{ url_for('dashboard', sort_by='distance', sort_order='desc') }}">Distanz absteigend</a>
        <a href="{{ url_for('dashboard', sort_by='elevation', sort_order='desc') }}">Höhenmeter absteigend</a>
        <a href="{{ url_for('dashboard', sort_by='duration', sort_order='desc') }}">Dauer absteigend</a>
    </div>

    <!-- Aktivitätstabelle -->
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Datum</th>
                <th>Aktivitätstyp</th>
                <th>Distanz (km)</th>
                <th>Höhenmeter (m)</th>
                <th>Dauer (min)</th>
                <th>Aktionen</th>
            </tr>
        </thead>

        <!-- Erstellt Zeile für jede Aktivität -->
        <tbody>
            {% for index, activity in enumerate(activities) %}
            <tr>
                <td>{{ activity['date'] }}</td>
                <td>{{ activity['type'] }}</td>
                <td>{{ activity['distance'] }}</td>
                <td>{{ activity['elevation'] }}</td>
                <td>{{ activity['duration'] }}</td>
                <td>
                    <!-- Aktion zum Löschen einer Aktivität -->
                    <form action="{{ url_for('delete_activity', activity_id=activity['id']) }}" method="POST" style="display:inline;">
                        <button type="submit">Löschen</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
